<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bedtime Story Cinema - Stories That Come Alive</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f1f3d 0%, #1a2f52 100%);
            color: #2c3e50;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: linear-gradient(135deg, #2a3f5f 0%, #1e2f4a 100%);
            padding: 20px 30px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            margin-bottom: 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 28px;
            font-weight: 700;
            color: #ffffff;
        }

        .tagline {
            color: #b8c9e0;
            font-size: 14px;
            margin-top: 5px;
        }

        .price-tag {
            background: #f0ad4e;
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 600;
            font-size: 18px;
        }

        .main-content {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 25px;
            margin-bottom: 20px;
        }

        .story-text-panel {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            max-height: 600px;
            overflow-y: auto;
        }

        .story-text-panel h2 {
            color: #1e3c72;
            margin-bottom: 15px;
            font-size: 22px;
        }

        .story-text {
            line-height: 1.8;
            font-size: 16px;
            color: #34495e;
        }

        .story-text span {
            transition: all 0.3s ease;
        }

        .story-text span.active {
            background: #ffeaa7;
            color: #2c3e50;
            font-weight: 600;
            padding: 2px 4px;
            border-radius: 3px;
        }

        .cinema-screen {
            background: linear-gradient(135deg, #2a3f5f 0%, #1e2f4a 100%);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .screen-frame {
            width: 100%;
            max-width: 700px;
            aspect-ratio: 16/10;
            background: linear-gradient(135deg, #f5f1e8 0%, #faf8f3 50%, #f5f1e8 100%);
            border-radius: 10px;
            border: 8px solid #8b7355;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2), inset 0 0 100px rgba(139, 115, 85, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }

        .paper-texture {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            opacity: 0.3;
            background-image: 
                repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,.02) 2px, rgba(0,0,0,.02) 4px),
                repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(0,0,0,.02) 2px, rgba(0,0,0,.02) 4px);
        }

        .illustration {
            width: 100%;
            height: 100%;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 30px;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
            position: relative;
            z-index: 1;
        }

        .illustration.active {
            display: flex;
            opacity: 1;
        }

        .illustration svg {
            max-width: 100%;
            max-height: 100%;
            filter: contrast(1.1);
        }

        .controls-panel {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .voice-selector {
            margin-bottom: 20px;
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .voice-selector label {
            font-weight: 600;
            color: #1e3c72;
        }

        .voice-selector select {
            flex: 1;
            padding: 10px;
            border: 2px solid #5a7ba6;
            border-radius: 8px;
            font-size: 14px;
            background: white;
            cursor: pointer;
        }

        .playback-controls {
            display: flex;
            gap: 15px;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }

        .control-btn {
            background: #1e3c72;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .control-btn:hover {
            background: #2a5298;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(30, 60, 114, 0.3);
        }

        .control-btn:disabled {
            background: #95a5a6;
            cursor: not-allowed;
            transform: none;
        }

        .control-btn.primary {
            background: #27ae60;
            padding: 15px 35px;
            font-size: 18px;
        }

        .control-btn.primary:hover {
            background: #229954;
        }

        .slider-group {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }

        .slider-control {
            flex: 1;
        }

        .slider-control label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #1e3c72;
            font-size: 14px;
        }

        .slider-control input[type="range"] {
            width: 100%;
            cursor: pointer;
        }

        .slider-value {
            text-align: center;
            margin-top: 5px;
            font-size: 13px;
            color: #5a7ba6;
        }

        .status-indicator {
            text-align: center;
            padding: 12px;
            background: #ecf0f1;
            border-radius: 8px;
            margin-top: 15px;
            color: #2c3e50;
            font-weight: 600;
        }

        .status-indicator.playing {
            background: #d5f4e6;
            color: #27ae60;
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            .story-text-panel {
                max-height: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div>
                <div class="logo">üåô Bedtime Story Cinema</div>
                <div class="tagline">Hand-drawn charcoal stories that come alive</div>
            </div>
            <div class="price-tag">‚Ç¨5 per story</div>
        </header>

        <div class="main-content">
            <div class="story-text-panel">
                <h2>üìñ The Moonlight Garden</h2>
                <div class="story-text" id="storyText"></div>
            </div>

            <div class="cinema-screen">
                <div class="screen-frame">
                    <div class="paper-texture"></div>
                    <div class="illustration active" id="scene1">
                        <svg viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
                            <!-- Rolling hills village sketch -->
                            <path d="M 0 200 Q 50 180 100 200 T 200 200 T 300 200 T 400 200 L 400 300 L 0 300 Z" 
                                  fill="none" stroke="#3a3a3a" stroke-width="2.5" opacity="0.7"/>
                            <path d="M 0 220 Q 60 200 120 220 T 240 220 T 360 220 T 400 220" 
                                  fill="none" stroke="#2a2a2a" stroke-width="2" opacity="0.5"/>
                            
                            <!-- Small houses -->
                            <rect x="80" y="185" width="25" height="20" fill="none" stroke="#2a2a2a" stroke-width="1.5"/>
                            <path d="M 77 185 L 92.5 170 L 108 185" fill="none" stroke="#2a2a2a" stroke-width="1.5"/>
                            <rect x="250" y="190" width="20" height="15" fill="none" stroke="#2a2a2a" stroke-width="1.5"/>
                            <path d="M 248 190 L 260 178 L 272 190" fill="none" stroke="#2a2a2a" stroke-width="1.5"/>
                            
                            <!-- Moon sketch -->
                            <circle cx="320" cy="60" r="35" fill="none" stroke="#4a4a4a" stroke-width="2.5" opacity="0.8"/>
                            <circle cx="315" cy="55" r="33" fill="none" stroke="#3a3a3a" stroke-width="1.5" opacity="0.4"/>
                            
                            <!-- Artistic strokes -->
                            <path d="M 50 250 Q 100 240 150 250" fill="none" stroke="#2a2a2a" stroke-width="1" opacity="0.3"/>
                            <path d="M 200 255 Q 250 245 300 255" fill="none" stroke="#2a2a2a" stroke-width="1" opacity="0.3"/>
                        </svg>
                    </div>
                    
                    <div class="illustration" id="scene2">
                        <svg viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
                            <!-- Cottage at forest edge -->
                            <rect x="130" y="120" width="80" height="90" fill="none" stroke="#2a2a2a" stroke-width="3"/>
                            <path d="M 120 120 L 170 80 L 220 120" fill="none" stroke="#2a2a2a" stroke-width="3"/>
                            
                            <!-- Door and window -->
                            <rect x="155" y="160" width="30" height="50" fill="none" stroke="#2a2a2a" stroke-width="2"/>
                            <rect x="145" y="135" width="20" height="20" fill="none" stroke="#2a2a2a" stroke-width="1.5"/>
                            <line x1="155" y1="135" x2="155" y2="155" stroke="#2a2a2a" stroke-width="1.5"/>
                            <line x1="145" y1="145" x2="165" y2="145" stroke="#2a2a2a" stroke-width="1.5"/>
                            
                            <!-- Trees sketched -->
                            <path d="M 50 210 L 50 120 M 45 140 Q 50 135 55 140 M 43 160 Q 50 155 57 160" 
                                  fill="none" stroke="#3a3a3a" stroke-width="2.5" opacity="0.6"/>
                            <path d="M 280 210 L 280 110 M 275 130 Q 280 125 285 130 M 273 155 Q 280 150 287 155" 
                                  fill="none" stroke="#3a3a3a" stroke-width="2.5" opacity="0.6"/>
                            
                            <!-- Ground texture -->
                            <path d="M 0 210 Q 100 200 200 210 T 400 210" fill="none" stroke="#3a3a3a" stroke-width="2" opacity="0.4"/>
                            <line x1="20" y1="220" x2="25" y2="225" stroke="#2a2a2a" stroke-width="1" opacity="0.3"/>
                            <line x1="60" y1="215" x2="65" y2="220" stroke="#2a2a2a" stroke-width="1" opacity="0.3"/>
                            <line x1="320" y1="218" x2="325" y2="223" stroke="#2a2a2a" stroke-width="1" opacity="0.3"/>
                        </svg>
                    </div>
                    
                    <div class="illustration" id="scene3">
                        <svg viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
                            <!-- Garden with glowing flowers -->
                            <ellipse cx="200" cy="200" rx="140" ry="70" fill="none" stroke="#3a3a3a" stroke-width="2" opacity="0.5"/>
                            
                            <!-- Flowers with radiating lines (glow effect in charcoal) -->
                            <g>
                                <!-- Flower 1 -->
                                <circle cx="160" cy="180" r="8" fill="none" stroke="#2a2a2a" stroke-width="2"/>
                                <line x1="160" y1="172" x2="160" y2="165" stroke="#2a2a2a" stroke-width="1.5" opacity="0.6"/>
                                <line x1="168" y1="180" x2="175" y2="180" stroke="#2a2a2a" stroke-width="1.5" opacity="0.6"/>
                                <line x1="152" y1="180" x2="145" y2="180" stroke="#2a2a2a" stroke-width="1.5" opacity="0.6"/>
                                <line x1="160" y1="188" x2="160" y2="195" stroke="#2a2a2a" stroke-width="1.5" opacity="0.6"/>
                                <line x1="166" y1="174" x2="171" y2="169" stroke="#2a2a2a" stroke-width="1" opacity="0.4"/>
                                <line x1="154" y1="174" x2="149" y2="169" stroke="#2a2a2a" stroke-width="1" opacity="0.4"/>
                                
                                <!-- Flower 2 -->
                                <circle cx="220" cy="170" r="7" fill="none" stroke="#2a2a2a" stroke-width="2"/>
                                <line x1="220" y1="163" x2="220" y2="157" stroke="#2a2a2a" stroke-width="1.5" opacity="0.6"/>
                                <line x1="227" y1="170" x2="233" y2="170" stroke="#2a2a2a" stroke-width="1.5" opacity="0.6"/>
                                <line x1="213" y1="170" x2="207" y2="170" stroke="#2a2a2a" stroke-width="1.5" opacity="0.6"/>
                                <line x1="225" y1="165" x2="229" y2="161" stroke="#2a2a2a" stroke-width="1" opacity="0.4"/>
                                
                                <!-- Flower 3 -->
                                <circle cx="190" cy="195" r="6" fill="none" stroke="#2a2a2a" stroke-width="2"/>
                                <line x1="190" y1="189" x2="190" y2="183" stroke="#2a2a2a" stroke-width="1.5" opacity="0.6"/>
                                <line x1="196" y1="195" x2="202" y2="195" stroke="#2a2a2a" stroke-width="1.5" opacity="0.6"/>
                                <line x1="184" y1="195" x2="178" y2="195" stroke="#2a2a2a" stroke-width="1.5" opacity="0.6"/>
                            </g>
                            
                            <!-- Grass strokes -->
                            <path d="M 120 210 L 122 200 M 140 215 L 142 205 M 180 212 L 182 202 M 210 218 L 212 208 M 250 214 L 252 204" 
                                  stroke="#3a3a3a" stroke-width="1.5" opacity="0.4"/>
                            
                            <!-- Moon in background -->
                            <circle cx="320" cy="60" r="30" fill="none" stroke="#4a4a4a" stroke-width="2" opacity="0.5"/>
                        </svg>
                    </div>
                    
                    <div class="illustration" id="scene4">
                        <svg viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
                            <!-- Little Luna character sketch -->
                            <circle cx="200" cy="130" r="28" fill="none" stroke="#2a2a2a" stroke-width="2.5"/>
                            
                            <!-- Hair strokes -->
                            <path d="M 175 120 Q 170 110 175 105" fill="none" stroke="#2a2a2a" stroke-width="2" opacity="0.7"/>
                            <path d="M 185 110 Q 183 100 188 98" fill="none" stroke="#2a2a2a" stroke-width="2" opacity="0.7"/>
                            <path d="M 215 110 Q 217 100 212 98" fill="none" stroke="#2a2a2a" stroke-width="2" opacity="0.7"/>
                            <path d="M 225 120 Q 230 110 225 105" fill="none" stroke="#2a2a2a" stroke-width="2" opacity="0.7"/>
                            
                            <!-- Face features -->
                            <circle cx="190" cy="128" r="3" fill="#2a2a2a"/>
                            <circle cx="210" cy="128" r="3" fill="#2a2a2a"/>
                            <path d="M 195 138 Q 200 142 205 138" fill="none" stroke="#2a2a2a" stroke-width="2"/>
                            
                            <!-- Body -->
                            <ellipse cx="200" cy="185" rx="32" ry="45" fill="none" stroke="#2a2a2a" stroke-width="2.5"/>
                            
                            <!-- Arms reaching toward flowers -->
                            <path d="M 168 170 Q 140 180 130 195" fill="none" stroke="#2a2a2a" stroke-width="2.5"/>
                            <path d="M 232 170 Q 260 180 270 195" fill="none" stroke="#2a2a2a" stroke-width="2.5"/>
                            
                            <!-- Legs -->
                            <line x1="188" y1="230" x2="185" y2="260" stroke="#2a2a2a" stroke-width="2.5"/>
                            <line x1="212" y1="230" x2="215" y2="260" stroke="#2a2a2a" stroke-width="2.5"/>
                            
                            <!-- Small flowers near hands -->
                            <circle cx="125" cy="200" r="4" fill="none" stroke="#2a2a2a" stroke-width="1.5"/>
                            <circle cx="275" cy="200" r="4" fill="none" stroke="#2a2a2a" stroke-width="1.5"/>
                            
                            <!-- Ground -->
                            <path d="M 0 260 Q 100 255 200 260 T 400 260" fill="none" stroke="#3a3a3a" stroke-width="2" opacity="0.4"/>
                        </svg>
                    </div>
                    
                    <div class="illustration" id="scene5">
                        <svg viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
                            <!-- Moon watching over -->
                            <circle cx="200" cy="80" r="45" fill="none" stroke="#2a2a2a" stroke-width="3"/>
                            <circle cx="195" cy="75" r="42" fill="none" stroke="#3a3a3a" stroke-width="1.5" opacity="0.4"/>
                            
                            <!-- Moon face (gentle smile) -->
                            <circle cx="190" cy="75" r="3" fill="#2a2a2a" opacity="0.6"/>
                            <circle cx="210" cy="75" r="3" fill="#2a2a2a" opacity="0.6"/>
                            <path d="M 185 88 Q 200 94 215 88" fill="none" stroke="#2a2a2a" stroke-width="2" opacity="0.7"/>
                            
                            <!-- Light rays from moon -->
                            <line x1="200" y1="35" x2="200" y2="15" stroke="#3a3a3a" stroke-width="2" opacity="0.5"/>
                            <line x1="245" y1="80" x2="265" y2="80" stroke="#3a3a3a" stroke-width="2" opacity="0.5"/>
                            <line x1="155" y1="80" x2="135" y2="80" stroke="#3a3a3a" stroke-width="2" opacity="0.5"/>
                            <line x1="230" y1="50" x2="245" y2="35" stroke="#3a3a3a" stroke-width="1.5" opacity="0.4"/>
                            <line x1="170" y1="50" x2="155" y2="35" stroke="#3a3a3a" stroke-width="1.5" opacity="0.4"/>
                            
                            <!-- Garden below with multiple flowers -->
                            <ellipse cx="200" cy="220" rx="150" ry="60" fill="none" stroke="#3a3a3a" stroke-width="2" opacity="0.4"/>
                            
                            <!-- Several flowers -->
                            <circle cx="140" cy="200" r="6" fill="none" stroke="#2a2a2a" stroke-width="1.5"/>
                            <circle cx="180" cy="210" r="5" fill="none" stroke="#2a2a2a" stroke-width="1.5"/>
                            <circle cx="220" cy="205" r="6" fill="none" stroke="#2a2a2a" stroke-width="1.5"/>
                            <circle cx="260" cy="215" r="5" fill="none" stroke="#2a2a2a" stroke-width="1.5"/>
                            <circle cx="200" cy="225" r="5" fill="none" stroke="#2a2a2a" stroke-width="1.5"/>
                            
                            <!-- Light beams connecting moon to flowers -->
                            <line x1="200" y1="125" x2="140" y2="200" stroke="#3a3a3a" stroke-width="0.5" opacity="0.3" stroke-dasharray="3,3"/>
                            <line x1="200" y1="125" x2="220" y2="205" stroke="#3a3a3a" stroke-width="0.5" opacity="0.3" stroke-dasharray="3,3"/>
                            <line x1="200" y1="125" x2="260" y2="215" stroke="#3a3a3a" stroke-width="0.5" opacity="0.3" stroke-dasharray="3,3"/>
                            
                            <!-- Small cottage silhouette in distance -->
                            <rect x="320" y="180" width="20" height="18" fill="none" stroke="#3a3a3a" stroke-width="1" opacity="0.4"/>
                            <path d="M 318 180 L 330 168 L 342 180" fill="none" stroke="#3a3a3a" stroke-width="1" opacity="0.4"/>
                        </svg>
                    </div>
                </div>
            </div>
        </div>

        <div class="controls-panel">
            <div class="voice-selector">
                <label>üéôÔ∏è Narrator Voice:</label>
                <select id="voiceSelect">
                    <option value="">Loading voices...</option>
                </select>
            </div>

            <div class="playback-controls">
                <button class="control-btn" id="restartBtn">‚èÆ Restart</button>
                <button class="control-btn primary" id="playBtn">‚ñ∂Ô∏è Play Story</button>
                <button class="control-btn" id="pauseBtn" disabled>‚è∏ Pause</button>
            </div>

            <div class="slider-group">
                <div class="slider-control">
                    <label>üîä Volume</label>
                    <input type="range" id="volumeSlider" min="0" max="100" value="80">
                    <div class="slider-value" id="volumeValue">80%</div>
                </div>
                <div class="slider-control">
                    <label>‚ö° Speed</label>
                    <input type="range" id="speedSlider" min="0.5" max="1.5" step="0.1" value="1">
                    <div class="slider-value" id="speedValue">1.0x</div>
                </div>
            </div>

            <div class="status-indicator" id="statusIndicator">
                Ready to play ‚Ä¢ Perfect for bedtime or language learning
            </div>
        </div>
    </div>

    <script>
        const story = [
            { text: "Once upon a time, in a quiet village surrounded by rolling hills,", scene: "scene1", duration: 5000 },
            { text: "there lived a little girl named Luna in a small cottage at the edge of the forest.", scene: "scene2", duration: 6000 },
            { text: "Every night, Luna noticed something magical: tiny flowers in her garden would glow softly under the moonlight.", scene: "scene3", duration: 7000 },
            { text: "One evening, curious and brave, Luna decided to follow the glowing petals deeper into the garden.", scene: "scene4", duration: 6000 },
            { text: "There, she discovered a secret: the moon was watching over all the children of the world, making sure they had sweet dreams.", scene: "scene5", duration: 8000 },
            { text: "From that night on, Luna always smiled at the moon before closing her eyes, knowing she was safe and loved.", scene: "scene5", duration: 7000 },
            { text: "And so, dear child, whenever you see the moon shining bright, remember: you are never alone. Sweet dreams.", scene: "scene5", duration: 6000 }
        ];

        let currentSegment = 0;
        let isPlaying = false;
        let voices = [];
        let synth = window.speechSynthesis;
        let currentUtterance = null;
        let segmentTimeout = null;

        const storyTextEl = document.getElementById('storyText');
        const playBtn = document.getElementById('playBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const restartBtn = document.getElementById('restartBtn');
        const voiceSelect = document.getElementById('voiceSelect');
        const volumeSlider = document.getElementById('volumeSlider');
        const speedSlider = document.getElementById('speedSlider');
        const volumeValue = document.getElementById('volumeValue');
        const speedValue = document.getElementById('speedValue');
        const statusIndicator = document.getElementById('statusIndicator');

        function loadVoices() {
            voices = synth.getVoices();
            const englishVoices = voices.filter(voice => voice.lang.startsWith('en'));
            
            voiceSelect.innerHTML = '';
            englishVoices.forEach((voice, index) => {
                const option = document.createElement('option');
                option.value = index;
                option.textContent = `${voice.name} (${voice.lang})`;
                voiceSelect.appendChild(option);
            });

            if (englishVoices.length > 0) {
                voiceSelect.selectedIndex = 0;
            }
        }

        if (synth.onvoiceschanged !== undefined) {
            synth.onvoiceschanged = loadVoices;
        }
        loadVoices();

        function initStoryText() {
            storyTextEl.innerHTML = story.map((segment, index) => 
                `<span id="segment-${index}">${segment.text}</span> `
            ).join('');
        }

        function showScene(sceneId) {
            document.querySelectorAll('.illustration').forEach(ill => {
                ill.classList.remove('active');
            });
            const scene = document.getElementById(sceneId);
            if (scene) {
                scene.classList.add('active');
            }
        }

        function highlightSegment(index) {
            document.querySelectorAll('.story-text span').forEach(span => {
                span.classList.remove('active');
            });
